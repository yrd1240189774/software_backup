# 数据备份工具 GUI 版本

## 功能说明

本数据备份工具提供了一个直观的图形用户界面，包含三个主要功能页面：

### 1. 备份页面
- **数据路径**：选择要备份的源路径
- **筛选页面**：提供六种筛选选项
  - 文件类型筛选
  - 时间范围筛选
  - 文件大小筛选
  - 排除用户/组
  - 排除文件名
  - 排除目录
- **备份配置**：
  - 打包算法选择（MyPack/tar）
  - 压缩选项（Haff/LZ77）
  - 加密选项（AES/DES）

### 2. 管理备份数据页面
- 查看备份文件夹中的备份数据
- 支持删除备份文件
- 支持刷新备份列表
- 支持还原备份到指定目录
- 还原加密备份时会提示输入密码

### 3. 备份设置页面
- 设置数据备份路径
- 启用定时备份功能
- 设置备份间隔（分钟）
- 设置保留备份数量

## 编译和运行

### 编译 GUI 版本
```bash
make all-gui
```

### 运行 GUI 程序
- 直接双击 `backup_gui_new.exe`
- 或在命令行中运行：`.ackup_gui_new.exe`
- 或使用命令行参数：`.ackup_gui_new.exe --gui`

### 编译命令行版本
```bash
make all
```

## 技术说明

1. **GUI 开发**：使用 Win32 API 开发
2. **字符编码**：采用 UTF-8 编码，确保中文显示正常
3. **编译选项**：
   - `-fexec-charset=UTF-8`：设置执行字符集为 UTF-8
   - `-finput-charset=UTF-8`：设置输入字符集为 UTF-8
4. **依赖库**：
   - gdi32.lib：图形设备接口
   - comctl32.lib：通用控件库
   - comdlg32.lib：通用对话框库
   - ole32.lib 和 oleaut32.lib：OLE 支持
   - uuid.lib：UUID 生成
   - OpenSSL 库：加密功能支持

## 解决中文乱码问题

程序已通过以下方式解决中文乱码问题：
1. 在 Makefile 中添加了 UTF-8 编译选项
2. 在 main.c 中设置了控制台 UTF-8 输出（命令行模式下）
3. 使用了正确的字符集处理方式

## 注意事项

1. 确保已安装 OpenSSL 库，且路径正确配置在 Makefile 中
2. 首次运行时，建议先设置备份路径
3. 定时备份功能需要程序保持运行状态
4. 加密备份的密码请妥善保管，丢失后无法恢复数据

## 界面预览

程序运行后将显示一个包含三个标签页的主窗口，每个标签页对应一个功能模块。界面设计简洁直观，操作方便。

## 命令行参数

- `--gui`：强制启动 GUI 模式
- 其他命令行参数用于命令行模式下的功能调用

## 示例使用流程

1. 打开程序，进入「备份页面」
2. 点击「选择路径」按钮，选择要备份的源文件夹
3. 根据需要设置筛选条件
4. 配置备份选项（打包、压缩、加密）
5. 点击「备份」按钮开始备份
6. 备份完成后，可以在「管理备份数据页面」查看和管理备份文件
7. 在「备份设置页面」可以设置定时备份

## 故障排除

如果遇到中文显示问题，请检查：
1. 确保使用了最新编译的版本
2. 确保系统支持 UTF-8 字符集
3. 尝试重新编译程序

## 版本更新

- 当前版本：1.0
- 支持基本备份、还原、压缩、加密功能
- 提供直观的图形用户界面
- 支持多种筛选和配置选项
